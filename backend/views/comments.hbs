
<div class="row">
   &nbsp;
</div>
<div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            
                            
                            <table width="100%" class="table table-striped table-bordered table-hover" id="products">
                                <!-- /.table-responsive -->
                                <div class="well">
                                    <h3>{{title}}</h3>
                                    <p>{{slogan}}</p>
                                    
                                </div>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Message</th>
                                        <th>auteur</th>
                                        <th>Etat</th>
                                    </tr>
                                </thead>
                                
                            </table>
                            
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
           
    <script>
       

        $(document).ready(function() {
            var table = $('#products').DataTable( {
                "serverSide": true,
                "ajax": '/admin/comments/api',
                "filter": false,
                "sort":false,
                "columns" : [
                    { "data": "date" },
                    { "data": "texte" },
                    { "data": "client" },
                    { "data": "etat" },
                ],
                "order": [[ 0, "desc" ]],
            columnDefs: [ 
                {
                    targets: 0,
                    render: function(from){
                        var d = new Date(from);
                        return d.toLocaleDateString();
                    }
                },{
                    targets:1,
                    bSortable:false
                },
                {
                    targets: 2,
                    render: function(data, type, row, meta){
                        
                        ret="<a href='/admin/users/"+data.id+"' title='Voir les informations de ce client'>"+data.prenom+" "+data.nom+"</a>";
                        
                        return ret;
                    },
                    
                },
                {
                    targets:3,
                    render:function(data,type,row,meta){
                        var checked = row.etat == 'published' ? "checked" : "";
                        return "<input id="+row.id+" "+checked+" type='checkbox'>";
                    }
                    
                }
                
                
             ]
            } 
            );

            table.on('draw', function(evt){
                $("input[type='checkbox']").each((index,elem)=>$(elem).bootstrapToggle({
                    on: 'Publi√©',
                    off: 'en attente'
                }));
            })
        } );   
    </script>
    
        